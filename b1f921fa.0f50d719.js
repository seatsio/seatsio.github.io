(window.webpackJsonp=window.webpackJsonp||[]).push([[203],{273:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return b})),n.d(t,"default",(function(){return u}));var a=n(3),o=n(7),r=(n(0),n(364)),c=n(367),s=n(368),i={title:"Book objects",slug:"/api/book-objects",hidden:!1,createdAt:"2018-07-31T08:46:42.677Z",updatedAt:"2021-02-26T11:54:38.499Z"},l={unversionedId:"REST API/api-objects/api-book-objects",id:"REST API/api-objects/api-book-objects",isDocsHomePage:!1,title:"Book objects",description:"Changes the object status to \u2018booked\u2019. Booked objects are not selectable on a rendered chart.",source:"@site/docs/REST API/api-objects/api-book-objects.md",slug:"/api/book-objects",permalink:"/docs/api/book-objects",version:"current",sidebar:"api",previous:{title:"Objects",permalink:"/docs/api/objects"},next:{title:"Release objects",permalink:"/docs/api/release-objects"}},b=[{value:"Request",id:"request",children:[]},{value:"Response",id:"response",children:[]}],p={toc:b};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Changes the object status to \u2018booked\u2019. Booked objects are not selectable on a rendered chart."),Object(r.b)(c.a,{groupId:"serverside-code-samples",defaultValue:"shell",values:[{label:"Text",value:"shell"},{label:"PHP",value:"php"},{label:"C#",value:"csharp"},{label:"Java",value:"java"},{label:"Python",value:"python"},{label:"Ruby",value:"ruby"},{label:"Javascript",value:"javascript"}],mdxType:"Tabs"},Object(r.b)(s.a,{value:"shell",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-shell"},"POST https://api-{region}.seatsio.net/events/{eventKey}/actions/book\n\nPOST https://api-{region}.seatsio.net/events/{eventKey}/actions/book?expand=objects\n"))),Object(r.b)(s.a,{value:"php",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-php"},'// No ticket types\n$seatsioClient->events->book("event1", ["A-3", "A-5"]);\n\n// Ticket tyeps\n$seatsioClient->events->book(\n  "event1",\n  [\n    ["objectId" => "A-3", "ticketType" => "adult"],\n    ["objectId" => "A-5", "ticketType" => "child"]\n  ]\n);\n'))),Object(r.b)(s.a,{value:"csharp",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-csharp"},'// No ticket types\nClient.Events.Book("event1", new [] { "A-3", "A-5" });\n\n// Ticket types\nObjectProperties object1 = new ObjectProperties("A-3", "adult");\nObjectProperties object2 = new ObjectProperties("A-5", "child");\nClient.Events.Book("event1", new [] { object1, object2 });\n'))),Object(r.b)(s.a,{value:"java",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},'// No ticket types\nclient.events.book("event1", Arrays.asList("A-3", "A-5"));\n\n// Ticket types\nObjectProperties object1 = new ObjectProperties("A-3", "adult");\nObjectProperties object2 = new ObjectProperties("A-5", "child");\nclient.events.book("event1", Arrays.asList(object1, object2));\n\n'))),Object(r.b)(s.a,{value:"python",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-python"},'# No ticket types\nclient.events.book("event1", ["A-3", "A-5"])\n\n# Ticket types\nobject1 = ObjectProperties("A-3", ticket_type="adult")\nobject2 = ObjectProperties("A-5", ticket_type="child")\nclient.events.book("event1", [object1, object2])\n'))),Object(r.b)(s.a,{value:"ruby",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-ruby"},"# No ticket types\nclient.events.book('event1', ['A-3', 'A-5'])\n\n# Ticket types\nobject1 = {:objectId => 'A-3', :ticketType => 'adult'}\nobject2 = {:objectId => 'A-5', :ticketType => 'child'}\nclient.events.book('event1', [object1, object2])\n"))),Object(r.b)(s.a,{value:"javascript",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},"// No ticket types\nawait client.events.book('eventKey', ['A-3', 'A-5']);\n\n// Ticket types\nlet object1 = {objectId: 'A-3', ticketType: 'adult'};\nlet object2 = {objectId: 'A-5', ticketType: 'child'};\nawait client.events.book('eventKey', [object1, object2]);\n\n")))),Object(r.b)("p",null,"You should use this API call to tell us whenever a ticket sale is confirmed. The exact definition of ",Object(r.b)("em",{parentName:"p"},"confirmed")," depends on your sales process, but this would typically be right before the payment has been processed (read more ",Object(r.b)("a",{parentName:"p",href:"http://support.seats.io/integrating-seats-io/when-should-i-book-my-seats"},"here"),")."),Object(r.b)("p",null,"You can change object status whenever you want. E.g. You could pre-book seats prior to opening up your sales page, to reserve VIP seats."),Object(r.b)("div",{className:"admonition admonition-info alert alert--info"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},'All seats (or tables, booths or GA places) passed in to this API will be considered as "used seats" for ',Object(r.b)("a",{parentName:"p",href:"https://www.seats.io/pricing"},"pricing purposes"),"."))),Object(r.b)("h2",{id:"request"},"Request"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},"// Minimal request\n{\n    'objects': ['A-3', 'A-5']\n}\n\n// Booking held seats \n{\n    'objects': ['A-3', 'A-5'], \n    'holdToken': 'wvXbB9MlHt'\n}\n\n// Ticket types\n{\n    'objects': [\n        {'objectId': 'A-1', 'ticketType': 'adult'},\n        {'objectId': 'A-2', 'ticketType': 'child'}\n    ]\n}\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"objects"),": an array of object ids to book, or an array of object ids and ticket types"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"holdToken")," ",Object(r.b)("i",null,"(optional)"),": the hold token must be supplied when you want to make sure that the same person that made the hold confirms his booking. If the seats were not held with this token, the API call doesn't book any seats and returns an error 400 (bad request)."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"orderId")," ",Object(r.b)("em",{parentName:"li"},"(optional)"),": an order id, defined by yourself, to be able to ",Object(r.b)("a",{parentName:"li",href:"/docs/api/detailed-reports#detailed-report-by-order-id"},"retrieve the objects IDs per order")," later on."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"channelKeys")," ",Object(r.b)("i",null,"(optional)"),": an array of strings, i.e. the channel keys of the channel(s) to which the objects belong. If omitted, and the objects to be booked are assigned to a channel, the request will fail with 400 Bad request. Pass in ",Object(r.b)("inlineCode",{parentName:"li"},"NO_CHANNEL")," as channel key to allow objects without a channel."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"ignoreChannels")," ",Object(r.b)("i",null,"(optional)"),": if true, the booking call succeeds, even if the booked objects belong to a channel. Useful inside a back office application, in which the user is allowed to book any seat - no matter the channel.\nShould not be used in combination with ",Object(r.b)("inlineCode",{parentName:"li"},"channelKeys"),"."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"ignoreSocialDistancing")," ",Object(r.b)("i",null,"(optional)"),": if true, social distancing rules are not checked for this booking.")),Object(r.b)("h2",{id:"response"},"Response"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},Object(r.b)("em",{parentName:"strong"}," Without expand=objects ")),"\n204 - No Content"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},Object(r.b)("em",{parentName:"strong"}," With expand=objects ")),"\n200 - ok"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},'{\n  "A-3": {\n    "label": "Section A-A-3",\n    "labels": {\n      "own": {\n        "label": "3",\n        "type": "seat",\n      },\n      "parent": {\n        "label": "A",\n        "type": "row"\n      },\n      "section": "Section A"\n    },\n    "status": "booked",\n    "categoryLabel": "Ground Floor",\n    "categoryKey": "4",\n    "ticketType": "adult",\n    "orderId": "order1",\n    "forSale": true,\n    "objectType": "seat",\n    "isAccessible": true,\n    "isCompanionSeat": false,\n    "hasRestrictedView": false,\n    "leftNeighbour": "Section A-A-2",\n    "rightNeighbour": "Section A-A-4",\n    "entrance": "Blue"\n  },\n  "A-5": {\n    "label": "Section A-A-5",\n    "labels": {\n      "own": {\n        "label": "5",\n        "type": "seat"\n      },\n      "parent": {\n        "label": "A",\n        "type": "row"\n      },\n      "section": "Section A"\n    },\n    "status": "booked",\n    "categoryLabel": "Ground Floor",\n    "categoryKey": "4",\n    "ticketType": "adult",\n    "orderId": "order1",\n    "forSale": true,\n    "objectType": "seat",\n    "isAccessible": true,\n    "isCompanionSeat": false,\n    "hasRestrictedView": false,\n    "leftNeighbour": "Section A-A-4",\n    "rightNeighbour": "Section A-A-6",\n    "entrance": "Blue"\n  }\n}\n')))}u.isMDXComponent=!0},363:function(e,t,n){"use strict";function a(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}t.a=function(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(o&&(o+=" "),o+=t);return o}},364:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return j}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),b=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=b(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),p=b(n),d=a,j=p["".concat(c,".").concat(d)]||p[d]||u[d]||r;return n?o.a.createElement(j,s(s({ref:t},l),{},{components:n})):o.a.createElement(j,s({ref:t},l))}));function j(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,c=new Array(r);c[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:a,c[1]=s;for(var l=2;l<r;l++)c[l]=n[l];return o.a.createElement.apply(null,c)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},365:function(e,t,n){"use strict";var a=n(0),o=n(366);t.a=function(){var e=Object(a.useContext)(o.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},366:function(e,t,n){"use strict";var a=n(0),o=Object(a.createContext)(void 0);t.a=o},367:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(365),c=n(363),s=n(54),i=n.n(s),l=37,b=39;t.a=function(e){var t=e.lazy,n=e.block,s=e.defaultValue,p=e.values,u=e.groupId,d=e.className,j=Object(r.a)(),m=j.tabGroupChoices,h=j.setTabGroupChoices,f=Object(a.useState)(s),v=f[0],y=f[1],O=a.Children.toArray(e.children);if(null!=u){var g=m[u];null!=g&&g!==v&&p.some((function(e){return e.value===g}))&&y(g)}var k=function(e){y(e),null!=u&&h(u,e)},N=[];return o.a.createElement("div",null,o.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(c.a)("tabs",{"tabs--block":n},d)},p.map((function(e){var t=e.value,n=e.label;return o.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":v===t,className:Object(c.a)("tabs__item",i.a.tabItem,{"tabs__item--active":v===t}),key:t,ref:function(e){return N.push(e)},onKeyDown:function(e){!function(e,t,n){switch(n.keyCode){case b:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case l:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(N,e.target,e)},onFocus:function(){return k(t)},onClick:function(){k(t)}},n)}))),t?Object(a.cloneElement)(O.filter((function(e){return e.props.value===v}))[0],{className:"margin-vert--md"}):o.a.createElement("div",{className:"margin-vert--md"},O.map((function(e,t){return Object(a.cloneElement)(e,{key:t,hidden:e.props.value!==v})}))))}},368:function(e,t,n){"use strict";var a=n(0),o=n.n(a);t.a=function(e){var t=e.children,n=e.hidden,a=e.className;return o.a.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}}}]);