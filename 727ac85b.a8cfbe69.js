(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{212:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return u})),n.d(t,"default",(function(){return b}));var a=n(3),s=n(7),r=(n(0),n(362)),i=n(365),o=n(366),l={title:"List status changes",slug:"/api/list-status-changes",hidden:!1,createdAt:"2018-08-02T10:08:44.047Z",updatedAt:"2019-06-25T18:23:26.722Z"},c={unversionedId:"REST API/api-events/api-list-status-changes",id:"REST API/api-events/api-list-status-changes",isDocsHomePage:!1,title:"List status changes",description:"Each time the status of an object changes (e.g. by holding, booking or releasing it), a status change is recorded in seats.io. Use the following API call to list the status changes for an event.",source:"@site/docs/REST API/api-events/api-list-status-changes.md",slug:"/api/list-status-changes",permalink:"/docs/api/list-status-changes",version:"current",sidebar:"api",previous:{title:"Retrieve the status of an object",permalink:"/docs/api/retrieve-the-status-of-an-object"},next:{title:"List status changes for an object",permalink:"/docs/api/list-status-changes-for-an-object"}},u=[],p={toc:u};function b(e){var t=e.components,n=Object(s.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Each time the status of an object changes (e.g. by holding, booking or releasing it), a status change is recorded in seats.io. Use the following API call to list the status changes for an event."),Object(r.b)("p",null,"Status changes are returned paginated, with the most recent ones first. Response body contains the hold token if a hold token was passed in when doing the status change (e.g. to hold an object, or to release an object that was previously held)."),Object(r.b)(i.a,{groupId:"serverside-code-samples",defaultValue:"shell",values:[{label:"Text",value:"shell"},{label:"PHP",value:"php"},{label:"C#",value:"csharp"},{label:"Java",value:"java"},{label:"Python",value:"python"},{label:"Ruby",value:"ruby"},{label:"Javascript",value:"javascript"}],mdxType:"Tabs"},Object(r.b)(o.a,{value:"shell",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-shell"},"GET https://api-{region}.seatsio.net/events/{eventKey}/status-changes\n\nGET https://api-{region}.seatsio.net/events/{eventKey}/status-changes?filter=A-1\n\nGET https://api-{region}.seatsio.net/events/{eventKey}/status-changes?sort=objectLabel:desc\n\nMore info: https://docs.seats.io/docs/api-pagination\n\n"))),Object(r.b)(o.a,{value:"php",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-php"},"$seatsioClient->events->statusChanges(eventKey, filter?, sortField?, sortDirection?)->firstPage(pageSize?)\n$seatsioClient->events->statusChanges(eventKey, filter?, sortField?, sortDirection?)->pageAfter(afterId, pageSize?)\n$seatsioClient->events->statusChanges(eventKey, filter?, sortField?, sortDirection?)->pageBefore(beforeId, pageSize?)\n\n$seatsioClient->events->statusChanges(eventKey, filter?, sortField?, sortDirection?)->all()\n\n/*\nSome examples (for charts, but listing status changes works similarly):\n\nhttps://github.com/seatsio/seatsio-php/blob/master/README.md#listing-charts-page-by-page\nhttps://github.com/seatsio/seatsio-php/blob/master/README.md#listing-all-charts\n*/\n"))),Object(r.b)(o.a,{value:"csharp",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-csharp"},"client.Events.StatusChanges(eventKey, filter?, sortField?, sortDirection?).FirstPage(pageSize?)\nclient.Events.StatusChanges(eventKey, filter?, sortField?, sortDirection?).PageAfter(afterId, filter?, pageSize?)\nclient.Events.StatusChanges(eventKey, filter?, sortField?, sortDirection?).PageBefore(beforeId, filter?, pageSize?)\n\nclient.Events.StatusChanges(eventKey, filter?, sortField?, sortDirection?).All(filter?);\n\n/*\nSome examples (for charts, but listing status changes works similarly):\n\nhttps://github.com/seatsio/seatsio-dotnet/blob/master/README.md#listing-charts-page-by-page\nhttps://github.com/seatsio/seatsio-dotnet/blob/master/README.md#listing-all-charts\n*/\n"))),Object(r.b)(o.a,{value:"java",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},"client.events.statusChanges(eventKey, filter?, sortField?, sortDirection?).firstPage(pageSize?)\nclient.events.statusChanges(eventKey, filter?, sortField?, sortDirection?).pageAfter(afterId, pageSize?)\nclient.events.statusChanges(eventKey, filter?, sortField?, sortDirection?).pageBefore(beforeId, pageSize?)\n\nclient.events.statusChanges(eventKey, filter?, sortField?, sortDirection?).all();\n\n/*\nSome examples (for charts, but listing status changes works similarly):\n\nhttps://github.com/seatsio/seatsio-java/blob/master/README.md#listing-charts-page-by-page\nhttps://github.com/seatsio/seatsio-java/blob/master/README.md#listing-all-charts\n*/\n"))),Object(r.b)(o.a,{value:"python",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-python"},'client.events.status_changes(event_key, filter? sort_field?, sort_direction?).first_page(page_size?)\nclient.events.status_changes(event_key, filter? sort_field?, sort_direction?).page_after(after_id, page_size?)\nclient.events.status_changes(event_key, filter? sort_field?, sort_direction?).page_before(before_id, page_size?)\n\nclient.events.status_changes(event_key, filter? sort_field?, sort_direction?).list()\n\n"""\nSome examples (for charts, but listing status changes works similarly):\n\nhttps://github.com/seatsio/seatsio-python/blob/master/README.md#listing-charts-page-by-page\nhttps://github.com/seatsio/seatsio-python/blob/master/README.md#listing-all-charts\n"""\n'))),Object(r.b)(o.a,{value:"ruby",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-ruby"},"client.events.list_status_changes(event_key, filter?, sort_field?, sort_direction?).first_page(page_size?)\nclient.events.list_status_changes(event_key, filter?, sort_field?, sort_direction?).page_after(after_id, page_size?)\nclient.events.list_status_changes(event_key, filter?, sort_field?, sort_direction?).page_before(before_id, page_size?)\n\nclient.events.list_status_changes(event_key, filter?, sort_field?, sort_direction?)\n  \n# Some examples (for charts, but listing status changes works similarly):\n\n# https://github.com/seatsio/seatsio-ruby/blob/master/README.md#listing-charts-page-by-page\n# https://github.com/seatsio/seatsio-ruby/blob/master/README.md#listing-all-charts\n"))),Object(r.b)(o.a,{value:"javascript",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},"import { StatusChangesParams } from 'seatsio'\n\nfor await (let statusChange of client.events.statusChanges(event.key).all(params?)) {\n     //Do something with the status change\n}\n\nlet params = new StatusChangesParams().sortByObjectLabel().sortDescending()\nawait client.events.statusChanges(event.key).firstPage(params, pageSize?)\n\nlet params = new StatusChangesParams().sortByStatus().sortAscending()\nawait client.events.statusChanges(event.key).pageAfter(afterId, params, pageSize?)\n\nlet params = new StatusChangesParams().withFilter('filter').sortByDate().sortDescending()\nawait client.events.statusChanges(event.key).pageBefore(beforeId, params, pageSize?)\n                                                                   /*\nSome examples (for charts, but listing status changes works similarly):\n\nhttps://github.com/seatsio/seatsio-java/blob/master/README.md#listing-charts-page-by-page\nhttps://github.com/seatsio/seatsio-java/blob/master/README.md#listing-all-charts\n*/\n")))),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"filter"),": use this parameter to filter on object labels. E.g. if you pass in 'A-1', all status changes for objects that have 'A-1' in their name will be returned (e.g. 'A-11', 'A-1', 'Section A-A-1')."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"sort"),": by default, status changes are sorted by date, with the newest status changes coming first. You can change this to sort by object label (",Object(r.b)("inlineCode",{parentName:"li"},"sort=objectLabel"),") or by status (",Object(r.b)("inlineCode",{parentName:"li"},"sort=status"),"). Sorting by date with the oldest status changes first is also possible (",Object(r.b)("inlineCode",{parentName:"li"},"sort=date:asc"),")")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Example request")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-shell"},"curl https://api-{region}.seatsio.net/events/anEvent/status-changes?limit=100&start_after_id=34 \\\n-u aSecretKey:\n")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-javascript"},'{\n    "next_page_starts_after": 122,\n    "items": [\n        {\n            "id": 169,\n            "eventId": 12,\n            "status": "booked",\n            "quantity": 1,\n            "objectLabel": "A-1",\n            "date": "2017-05-05T10:58:44.715Z",\n            "orderId": "anOrder",\n            "extraData": {\n                "name": "John Doe"\n            },\n            "origin": {\n              "type": "API_CALL",\n              "ip": "10.4.32.67"\n            }\n        },\n        {\n            "id": 168,\n            "eventId": 12,\n            "status": "reservedByToken",\n            "quantity": 1,\n            "objectLabel": "B-1",\n            "date": "2017-05-05T09:58:44.715Z",\n            "orderId": "anotherOrder",\n            "extraData": {\n                "name": "Jane Doe"\n            }, \n            "holdToken": "wvXbB9MlHt",\n            "origin": {\n              "type": "HELD_BY_USER"\n            }\n        }\n        ...\n    ]\n}\n')),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"origin")," can be either ",Object(r.b)("inlineCode",{parentName:"p"},"API_CALL"),", ",Object(r.b)("inlineCode",{parentName:"p"},"HELD_BY_USER"),", ",Object(r.b)("inlineCode",{parentName:"p"},"HOLD_RELEASED_BY_USER")," or ",Object(r.b)("inlineCode",{parentName:"p"},"HOLD_EXPIRED"),". An ",Object(r.b)("inlineCode",{parentName:"p"},"ip")," property is present when the type equals ",Object(r.b)("inlineCode",{parentName:"p"},"API_CALL"),"."))}b.isMDXComponent=!0},361:function(e,t,n){"use strict";function a(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}t.a=function(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(s&&(s+=" "),s+=t);return s}},362:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var a=n(0),s=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var c=s.a.createContext({}),u=function(e){var t=s.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return s.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return s.a.createElement(s.a.Fragment,{},t)}},g=s.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(n),g=a,d=p["".concat(i,".").concat(g)]||p[g]||b[g]||r;return n?s.a.createElement(d,o(o({ref:t},c),{},{components:n})):s.a.createElement(d,o({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=g;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var c=2;c<r;c++)i[c]=n[c];return s.a.createElement.apply(null,i)}return s.a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},363:function(e,t,n){"use strict";var a=n(0),s=n(364);t.a=function(){var e=Object(a.useContext)(s.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},364:function(e,t,n){"use strict";var a=n(0),s=Object(a.createContext)(void 0);t.a=s},365:function(e,t,n){"use strict";var a=n(0),s=n.n(a),r=n(363),i=n(361),o=n(54),l=n.n(o),c=37,u=39;t.a=function(e){var t=e.lazy,n=e.block,o=e.defaultValue,p=e.values,b=e.groupId,g=e.className,d=Object(r.a)(),h=d.tabGroupChoices,m=d.setTabGroupChoices,f=Object(a.useState)(o),v=f[0],y=f[1],j=a.Children.toArray(e.children);if(null!=b){var O=h[b];null!=O&&O!==v&&p.some((function(e){return e.value===O}))&&y(O)}var _=function(e){y(e),null!=b&&m(b,e)},E=[];return s.a.createElement("div",null,s.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(i.a)("tabs",{"tabs--block":n},g)},p.map((function(e){var t=e.value,n=e.label;return s.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":v===t,className:Object(i.a)("tabs__item",l.a.tabItem,{"tabs__item--active":v===t}),key:t,ref:function(e){return E.push(e)},onKeyDown:function(e){!function(e,t,n){switch(n.keyCode){case u:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case c:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(E,e.target,e)},onFocus:function(){return _(t)},onClick:function(){_(t)}},n)}))),t?Object(a.cloneElement)(j.filter((function(e){return e.props.value===v}))[0],{className:"margin-vert--md"}):s.a.createElement("div",{className:"margin-vert--md"},j.map((function(e,t){return Object(a.cloneElement)(e,{key:t,hidden:e.props.value!==v})}))))}},366:function(e,t,n){"use strict";var a=n(0),s=n.n(a);t.a=function(e){var t=e.children,n=e.hidden,a=e.className;return s.a.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}}}]);